{"version":3,"sources":["../../src/rules/requireFileOverview.js"],"names":["state","utils","targetTagName","getPreferredTagName","tagName","hasFileOverview","hasTag","hasDuplicate","exit","hasNonCommentBeforeFileOverview","obj","getPreferredTagNameObject","blocked","reportSettings","replacement","iterateAllJsdocs","meta","fixable","type","nonComment"],"mappings":";;;;;;;AAAA;;;;eAEe,2BAAa,CAAC;AAC3BA,EAAAA,KAD2B;AAE3BC,EAAAA;AAF2B,CAAD,KAGtB;AACJ,QAAMC,aAAa,GAAGD,KAAK,CAACE,mBAAN,CAA0B;AAACC,IAAAA,OAAO,EAAE;AAAV,GAA1B,CAAtB;AAEA,QAAMC,eAAe,GAAGH,aAAa,IAAID,KAAK,CAACK,MAAN,CAAaJ,aAAb,CAAzC;;AAEA,MAAIF,KAAK,CAACK,eAAV,EAA2B;AACzBL,IAAAA,KAAK,CAACO,YAAN,GAAqBF,eAArB;AAEA;AACD;;AAEDL,EAAAA,KAAK,CAACK,eAAN,GAAwBA,eAAxB;AACD,CAfc,EAeZ;AACDG,EAAAA,IAAI,CAAE;AAACR,IAAAA,KAAD;AAAQC,IAAAA;AAAR,GAAF,EAAkB;AACpB,QAAID,KAAK,CAACK,eAAN,IAAyB,CAACL,KAAK,CAACO,YAAhC,IACF,CAACP,KAAK,CAACS,+BADT,EAEE;AACA;AACD;;AACD,UAAMC,GAAG,GAAGT,KAAK,CAACU,yBAAN,CAAgC;AAACP,MAAAA,OAAO,EAAE;AAAV,KAAhC,CAAZ;;AACA,QAAIM,GAAG,IAAIA,GAAG,CAACE,OAAf,EAAwB;AACtBX,MAAAA,KAAK,CAACY,cAAN,CACG,sDAAqDH,GAAG,CAACN,OAAQ,GAAlE,GACA,sCAFF;AAID,KALD,MAKO;AACL,YAAMF,aAAa,GAAGQ,GAAG,IAAIA,GAAG,CAACI,WAAX,IAA0BJ,GAAhD;;AACA,UAAIV,KAAK,CAACO,YAAV,EAAwB;AACtBN,QAAAA,KAAK,CAACY,cAAN,CACG,cAAaX,aAAc,EAD9B;AAGD,OAJD,MAIO,IAAIF,KAAK,CAACK,eAAN,IACPL,KAAK,CAACS,+BADH,EAEL;AACAR,QAAAA,KAAK,CAACY,cAAN,CACG,IAAGX,aAAc,yCADpB;AAGD,OANM,MAMA;AACLD,QAAAA,KAAK,CAACY,cAAN,CAAsB,YAAWX,aAAc,EAA/C;AACD;AACF;AACF,GA7BA;;AA8BDa,EAAAA,gBAAgB,EAAE,IA9BjB;AA+BDC,EAAAA,IAAI,EAAE;AACJC,IAAAA,OAAO,EAAE,MADL;AAEJC,IAAAA,IAAI,EAAE;AAFF,GA/BL;;AAmCDC,EAAAA,UAAU,CAAE;AAACnB,IAAAA;AAAD,GAAF,EAAW;AACnBA,IAAAA,KAAK,CAACS,+BAAN,GAAwC,CAACT,KAAK,CAACK,eAA/C;AACD;;AArCA,CAfY,C","sourcesContent":["import iterateJsdoc from '../iterateJsdoc';\n\nexport default iterateJsdoc(({\n  state,\n  utils,\n}) => {\n  const targetTagName = utils.getPreferredTagName({tagName: 'file'});\n\n  const hasFileOverview = targetTagName && utils.hasTag(targetTagName);\n\n  if (state.hasFileOverview) {\n    state.hasDuplicate = hasFileOverview;\n\n    return;\n  }\n\n  state.hasFileOverview = hasFileOverview;\n}, {\n  exit ({state, utils}) {\n    if (state.hasFileOverview && !state.hasDuplicate &&\n      !state.hasNonCommentBeforeFileOverview\n    ) {\n      return;\n    }\n    const obj = utils.getPreferredTagNameObject({tagName: 'file'});\n    if (obj && obj.blocked) {\n      utils.reportSettings(\n        `\\`settings.jsdoc.tagNamePreference\\` cannot block @${obj.tagName} ` +\n        'for the `require-file-overview` rule',\n      );\n    } else {\n      const targetTagName = obj && obj.replacement || obj;\n      if (state.hasDuplicate) {\n        utils.reportSettings(\n          `Duplicate @${targetTagName}`,\n        );\n      } else if (state.hasFileOverview &&\n          state.hasNonCommentBeforeFileOverview\n      ) {\n        utils.reportSettings(\n          `@${targetTagName} should be at the beginning of the file`,\n        );\n      } else {\n        utils.reportSettings(`Missing @${targetTagName}`);\n      }\n    }\n  },\n  iterateAllJsdocs: true,\n  meta: {\n    fixable: 'code',\n    type: 'suggestion',\n  },\n  nonComment ({state}) {\n    state.hasNonCommentBeforeFileOverview = !state.hasFileOverview;\n  },\n});\n"],"file":"requireFileOverview.js"}